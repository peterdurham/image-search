(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{147:function(e,t,a){"use strict";a.r(t),a.d(t,"graphql",function(){return f}),a.d(t,"StaticQueryContext",function(){return d}),a.d(t,"StaticQuery",function(){return m});var n=a(0),r=a.n(n),i=a(4),s=a.n(i),u=a(148),c=a.n(u);a.d(t,"Link",function(){return c.a}),a.d(t,"withPrefix",function(){return u.withPrefix}),a.d(t,"navigate",function(){return u.navigate}),a.d(t,"push",function(){return u.push}),a.d(t,"replace",function(){return u.replace}),a.d(t,"navigateTo",function(){return u.navigateTo});var o=a(159),l=a.n(o);a.d(t,"PageRenderer",function(){return l.a});var p=a(45);a.d(t,"parsePath",function(){return p.a});var d=r.a.createContext({}),m=function(e){return r.a.createElement(d.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};function f(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}m.propTypes={data:s.a.object,query:s.a.string.isRequired,render:s.a.func,children:s.a.func}},151:function(e,t,a){"use strict";var n=a(172),r=a(0),i=a.n(r),s=a(4),u=a.n(s),c=a(173),o=a.n(c),l=a(147),p=(a(184),function(e){return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"headerContent"},i.a.createElement("h1",null,i.a.createElement(l.Link,{to:"/"},e.TitleStuff)),i.a.createElement("h2",null,"An image search for written media")))}),d=(a(170),a(231),function(){return i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"footerContent"},i.a.createElement("p",null,i.a.createElement("a",{href:"https://github.com/danielevans/Hackathon"},i.a.createElement("img",{src:"https://i.imgur.com/C2P70Cu.png",alt:"Github Logo",id:"github-logo"}))),i.a.createElement("p",null,"Â© 2018, PDX Hackathon Group with Peter, Daniel1, DanielA, Aaron, and Tony!")))}),m=(a(232),function(e){var t=e.children;return i.a.createElement(l.StaticQuery,{query:"755544856",render:function(e){return i.a.createElement(i.a.Fragment,null," ",i.a.createElement(o.a,{title:e.site.siteMetadata.title,meta:[{name:"description",content:"Sample"},{name:"keywords",content:"sample, something"}]}," ",i.a.createElement("html",{lang:"en"})),i.a.createElement(p,{TitleStuff:"1000 Words"}),i.a.createElement("div",null,t),i.a.createElement(d,null))},data:n})});m.propTypes={children:u.a.node.isRequired};t.a=m},159:function(e,t,a){var n;e.exports=(n=a(183))&&n.default||n},163:function(e,t,a){},170:function(e,t,a){"use strict";a(185),a(75),a(27),a(187),a(48),a(160),a(162);var n,r,i,s,u,c=a(7),o=a.n(c),l=a(50),p=a.n(l),d=a(0),m=a.n(d),f=(a(163),a(189)),g=a.n(f),h=function(e){var t=e.selectedTags.indexOf(e.tagName),a=t>-1?m.a.createElement("div",{className:"image__tag image__tag--selected",onClick:function(){return e.selectTag(e.tagName)}},e.tagName):null,n=t<0?m.a.createElement("div",{className:"image__tag",onClick:function(){return e.selectTag(e.tagName)}},e.tagName):null;return m.a.createElement("div",null,a,n)},v=a(155),_=a.n(v),b=(a(78),a(153),a(156)),E=a.n(b),y=(a(34),a(77),a(49),a(76),{baseURI:Object({NODE_ENV:"production",PUBLIC_DIR:"C:\\Users\\Peter\\Desktop\\image-search/public",BUILD_STAGE:"build-javascript",GATSBY_BUILD_STAGE:"build-javascript"}).GATSBY_CONCEPT_API_BASE_URI,url:function(e){return[y.baseURI,e].join("")},escape:function(e){return encodeURIComponent(e.toString().toLowerCase().replace(/[\s]+/,""))},associations:(n=E()(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(y.url("/related/c/en/"+escape(t)+"?filter=/c/en&limit=5")).then(function(){var e=E()(_.a.mark(function e(t){var a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return a=e.sent,e.abrupt("return",window.z=(a.related||[]).map(function(e){return(e["@id"]||"").replace(/^.*\//,"").replace("_"," ")}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}),w=y,N=(a(80),a(81),a(191)),x=a.n(N),T={baseURI:Object({NODE_ENV:"production",PUBLIC_DIR:"C:\\Users\\Peter\\Desktop\\image-search/public",BUILD_STAGE:"build-javascript",GATSBY_BUILD_STAGE:"build-javascript"}).GATSBY_GUTENBERG_API_BASE_URI,loaded_dictionaries:{},loading_promises:{},words:null,url:function(e){return[T.baseURI,e].join("")},dictionary:(u=E()(_.a.mark(function e(t){var a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t[0]){e.next=3;break}return e.abrupt("return",null);case 3:if(a=a.toLowerCase(),!T.loaded_dictionaries[a]){e.next=6;break}return e.abrupt("return",T.loaded_dictionaries[a][t]);case 6:return e.abrupt("return",T.getDictionary("/dictionary/"+a+".json",T.loaded_dictionaries,a).then(function(e){return e[t]}));case 7:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)}),wordList:(s=E()(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.words){e.next=4;break}return t="/dictionary/words.txt",T.loading_promises[t]||(T.loading_promises[t]=fetch(T.url(t)).then(function(){var e=E()(_.a.mark(function e(t){var a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return a=e.sent,T.words=a.split("\n"),e.abrupt("return",T.words);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())),e.abrupt("return",T.loading_promises[t]);case 4:return e.abrupt("return",T.words);case 5:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),getDictionary:(i=E()(_.a.mark(function e(t,a,n){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.loading_promises[t]||(T.loading_promises[t]=fetch(T.url(t)).then(function(){var e=E()(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return a[n]=e.sent,e.abrupt("return",a[n]);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())),e.abrupt("return",T.loading_promises[t]);case 2:case"end":return e.stop()}},e,this)})),function(e,t,a){return i.apply(this,arguments)}),getParagraph:(r=E()(_.a.mark(function e(t){var a,n,r,i,s,u,c,o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.wordList();case 2:return a=e.sent,n=t.map(function(e){return x()(e)}).filter(function(e){return a.indexOf(e)>=0}),n.map(function(e){return T.dictionary(e)}),r={},e.next=8,Promise.all(n.map(function(){var e=E()(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.dictionary(t);case 2:e.sent.forEach(function(e){var t=e.split(":"),a=parseInt(t[0],10),n=t.slice(1,3).join(":");r[n]=(r[n]||0)+a,i?r[i]<a&&(i=n):i=n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 8:return s=i.split(":")[0],u=i.split(":")[1],c=s.split("").slice(0,s.length-1).join("/"),o="/gutenberg_data/aleph.gutenberg.org/"+c+"/"+s+"/"+s+".json",e.abrupt("return",fetch(T.url(o)).then(function(){var e=E()(_.a.mark(function e(t){var a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return a=e.sent,e.abrupt("return",{text:(a.paragraphs[u]||{}).text,document:a,document_id:s});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 13:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},D=T,k=(a(194),function(e){function t(t){var a;return(a=e.call(this,t)||this).state={text:"Loading"},a}o()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;Promise.all(this.props.tags.map(function(e){return w.associations(e)})).then(function(){var t=E()(_.a.mark(function t(a){var n,r;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],a.forEach(function(e){(e||[]).forEach(function(e){n.indexOf(e)<=0&&n.push(e)})}),t.next=4,D.getParagraph(n);case 4:r=t.sent,e.setState({text:(r||{}).text});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},a.render=function(){return m.a.createElement("p",{className:"results__text"},this.state.text)},t}(m.a.Component)),I=a(195),S=new I.App({apiKey:"7a58f90bee4743879b6108d0272685bd"}),U=function(e){function t(t){var a;return(a=e.call(this,t)||this).bindInput=function(e){a.setState({urlInput:e})},a.selectURL=function(){var e=a.state.urlInput.toString();a.setState({url:e,imageName:e,selectedTags:[],imageDisplayed:!0}),a.linkAPIHandler(e)},a.linkAPIHandler=function(e){S.models.initModel({id:I.GENERAL_MODEL,version:"aa7f35c01e0642fda5cf400f543e7c40"}).then(function(t){return t.predict({url:e})}).then(function(e){var t=e.outputs[0].data.concepts.map(function(e){return e.name}),n=t.slice(0,2);a.setState(function(){return{tags:t,uploadDisplay:!1,abbrevTags:n}})})},a.uploadAPIHandler=function(e){S.models.predict(I.GENERAL_MODEL,{base64:e.base64.replace(/.*,/,"")}).then(function(t){var n=t.outputs[0].data.concepts.map(function(e){return e.name}),r=n.slice(0,2);a.setState(function(){return{tags:n,url:e.base64,imageName:e.name,uploadDisplay:!1,selectedTags:[],imageDisplayed:!0,abbrevTags:r}})})},a.displayUpload=function(){a.setState({uploadDisplay:!0})},a.selectTagHandler=function(e){var t=a.state.selectedTags.concat();if(t.indexOf(e)<0)t.push(e),a.setState({selectedTags:t});else{var n=t.indexOf(e);t.splice(n,1),a.setState({selectedTags:t})}},a.removeImageHandler=function(){a.setState(function(){return{tags:[],selectedTags:[],urlInput:"",url:"",imageName:"",files:[],uploadDisplay:!0,imageDisplayed:!1,abbrevTags:[]}})},a.selectTagHandler=a.selectTagHandler.bind(p()(p()(a))),a.state={tags:[],selectedTags:[],urlInput:"",url:"",imageName:"",files:[],uploadDisplay:!0,imageDisplayed:!1,abbrevTags:[]},a}o()(t,e);var a=t.prototype;return a.getFiles=function(e){this.setState(function(){return{tags:[],selectedTags:[],urlInput:"",url:"",imageName:"",files:[],uploadDisplay:!1,imageDisplayed:!0,abbrevTags:[]}}),this.uploadAPIHandler(e[0])},a.render=function(){var e=this,t=!0===this.state.imageDisplayed?m.a.createElement("div",{className:"image__close",onClick:function(){return e.removeImageHandler()}},m.a.createElement("i",{className:"fa fa-window-close"})):null,a=!0===this.state.imageDisplayed?m.a.createElement("img",{className:"image",src:this.state.url,alt:"image"}):null,n=!0===this.state.imageDisplayed?m.a.createElement("div",{className:"image__tags"},this.state.tags.map(function(t){return m.a.createElement(h,{key:t,selectTag:e.selectTagHandler,tagName:t,selectedTags:e.state.selectedTags})}),m.a.createElement("div",{className:"image_refine"},u)):null,r=this.state.abbrevTags.length>0?m.a.createElement(k,{tags:this.state.abbrevTags}):null,i=!0===this.state.uploadDisplay?m.a.createElement("div",null,m.a.createElement("div",{className:"main__header"},"Upload or link to an image"),m.a.createElement("div",{className:"upload__options"},m.a.createElement("div",{className:"upload__link"},m.a.createElement(g.a,{multiple:!0,onDone:this.getFiles.bind(this)})),m.a.createElement("div",{className:"upload__text"},"OR"),m.a.createElement("div",{className:"upload__url"},m.a.createElement("input",{placeholder:"Enter Image URL",className:"upload__input",type:"text",onChange:function(t){return e.bindInput(t.target.value)}}),m.a.createElement("button",{className:"upload__button",onClick:function(){return e.selectURL()}},"Select URL")))):null,s=!1===this.state.uploadDisplay?m.a.createElement("div",{className:"upload__change"},m.a.createElement("div",{className:"upload__current"},"Current Upload:",this.state.imageName),m.a.createElement("button",{className:"upload__button",onClick:function(){return e.displayUpload()}},"Upload new photo")):null,u=this.state.selectedTags.length>4?m.a.createElement("button",{className:"upload__search"},"Search selected tags"):null;return m.a.createElement("div",null,i,s,m.a.createElement("div",{className:"image__display"},m.a.createElement("div",{className:"image__div"},a,t),n),m.a.createElement("div",{className:"results__header"},"Results"),r)},t}(m.a.Component);t.a=U},172:function(e){e.exports={data:{site:{siteMetadata:{title:"Gatsby Default Starter"}}}}},183:function(e,t,a){"use strict";a.r(t);a(35);var n=a(0),r=a.n(n),i=a(4),s=a.n(i),u=a(70),c=a(2),o=function(e){var t=e.location,a=c.default.getResourcesForPathnameSync(t.pathname);return r.a.createElement(u.a,Object.assign({location:t,pageResources:a},a.json))};o.propTypes={location:s.a.shape({pathname:s.a.string.isRequired}).isRequired},t.default=o},184:function(e,t,a){},194:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){}}]);
//# sourceMappingURL=1-34326597313d7a869d81.js.map